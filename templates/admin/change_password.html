{% extends "admin/base.html" %}

{% block title %}Change Password{% endblock %}

{% block content %}
    <div class="admin-header">
        <h2>Change Password</h2>
    </div>

    <div class="admin-card">
        {% if error %}
            <div style="background: #FEE2E2; border: 1px solid #FCA5A5; color: #991B1B; padding: 1rem; border-radius: 6px; margin-bottom: 1.5rem;">
                <strong>Error:</strong> {{ error }}
            </div>
        {% endif %}

        {% if success %}
            <div style="background: #D1FAE5; border: 1px solid #86EFAC; color: #065F46; padding: 1rem; border-radius: 6px; margin-bottom: 1.5rem;">
                <strong>Success:</strong> {{ success }}
            </div>
        {% endif %}

        <form method="POST" action="{{ url_for('admin.change_password') }}">
            <div style="margin-bottom: 1.5rem;">
                <label for="current_password" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #0B1221;">
                    Current Password
                </label>
                <input 
                    type="password" 
                    id="current_password" 
                    name="current_password" 
                    required
                    style="width: 100%; max-width: 400px; padding: 0.75rem; border: 1px solid #D1D5DB; border-radius: 6px; font-size: 1rem; box-sizing: border-box;"
                    autocomplete="current-password"
                >
            </div>

            <div style="margin-bottom: 1.5rem;">
                <label for="new_password" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #0B1221;">
                    New Password
                </label>
                <input 
                    type="password" 
                    id="new_password" 
                    name="new_password" 
                    required
                    minlength="8"
                    style="width: 100%; max-width: 400px; padding: 0.75rem; border: 1px solid #D1D5DB; border-radius: 6px; font-size: 1rem; box-sizing: border-box;"
                    autocomplete="new-password"
                >
                <p style="margin-top: 0.5rem; color: #6B7280; font-size: 0.875rem;">
                    Must be at least 8 characters long
                </p>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <label for="confirm_password" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #0B1221;">
                    Confirm New Password
                </label>
                <input 
                    type="password" 
                    id="confirm_password" 
                    name="confirm_password" 
                    required
                    minlength="8"
                    style="width: 100%; max-width: 400px; padding: 0.75rem; border: 1px solid #D1D5DB; border-radius: 6px; font-size: 1rem; box-sizing: border-box;"
                    autocomplete="new-password"
                >
            </div>

            <div>
                <button type="submit" class="btn-admin" style="margin-right: 1rem;">
                    Update Password
                </button>
                <a href="{{ url_for('admin.dashboard') }}" class="btn-admin btn-admin-secondary" style="text-decoration: none;">
                    Cancel
                </a>
            </div>
        </form>
    </div>

    <script>
        // Client-side validation
        document.querySelector('form').addEventListener('submit', function(e) {
            const newPassword = document.getElementById('new_password').value;
            const confirmPassword = document.getElementById('confirm_password').value;
            
            if (newPassword !== confirmPassword) {
                e.preventDefault();
                alert('New passwords do not match!');
                return false;
            }
            
            if (newPassword.length < 8) {
                e.preventDefault();
                alert('New password must be at least 8 characters long!');
                return false;
            }
        });
    </script>
{% endblock %}
